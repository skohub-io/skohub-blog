{"componentChunkName":"component---src-templates-blog-post-js","path":"/2020-06-25-skohub-pubsub/","result":{"data":{"site":{"siteMetadata":{"title":"Skohub Blog"}},"markdownRemark":{"id":"8222f844-ed14-527d-aaad-85f396f7f114","excerpt":"ⓘ Update, 2022-03-01: Due to lacking resources for maintenance, we decided to shut down the SkoHub PubSub demo server at skohub.io for an indefinite time…","html":"<hr>\n<p>ⓘ <strong>Update, 2022-03-01</strong>: <em>Due to lacking resources for maintenance, we decided to shut down the SkoHub PubSub demo server at skohub.io for an indefinite time. However, the <a href=\"https://github.com/skohub-io/skohub-pubsub\">code</a> is still there for anybody to set up their own instance.</em></p>\n<hr>\n<p>In the previous blog posts we have presented <a href=\"http://blog.lobid.org/2019/09/27/presenting-skohub-vocabs.html\">SkoHub Vocabs</a> and <a href=\"http://blog.lobid.org/2020/03/31/skohub-editor.html\">SkoHub Editor</a>. In the final post of this SkoHub introduction series we will take a deeper look at SkoHub PubSub, the part of SkoHub that brings the novel approach of KOS-based content subscription into the game.</p>\n<p>Let’s refresh what SkoHub is about by quoting the gist from <a href=\"https://skohub.io/\">the project homepage</a>:</p>\n<blockquote>\n<p>SkoHub supports a novel approach for finding content on the web. The general idea is to extend the scope of Knowledge Organization Systems (KOS) to also act as communication hubs for publishers and information seekers. In effect, SkoHub allows to follow specific subjects in order to be notified when new content about that subject is published.</p>\n</blockquote>\n<p>Before diving into the technical implementation and protocols used, we provide an example on how this subscription, publication and notification process can be carried out in practice. Although SkoHub PubSub constitutes the core of the SkoHub infrastructure being the module that brings all SkoHub components together, it is not visible to end users by itself but only through applications which send out notifications or subscribe to a specific topic. (This is the great thing about open standards as it also invites everybody to develop new clients for specific use cases!)</p>\n<p>So, let’s take a look at an example workflow involving SkoHub Editor and the federated microblogging service <a href=\"https://en.wikipedia.org/wiki/Mastodon_(software)\">Mastodon</a> to demonstrate the functionalities.</p>\n<h2>Subscribing to a subject</h2>\n<p>In one of the already mentioned blog posts we exemplarily published the <a href=\"https://w3id.org/class/esc/scheme\">Educational Subjects Classification</a> with SkoHub Vocabs. Now, let’s take a look at a single subject from this classification, e.g. <a href=\"https://w3id.org/class/esc/n0322\">Library, information and archival studies</a>:</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/85426ef69485c8c526778217db5f24f5/1e1c3/concept.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 58.86075949367089%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAACC0lEQVQoz6WS22oTURSG531EPIEgIop4443P4aWI+AAieC2FNtU7RbC0KkUUpJaKaGnS2mQ6maSpxZY2c85kDplJ5phPMj3goVbBH3722ou9P9YPS5hfXeSTtMKiXKUsi4WXG2tU6iJLa1Uqkkit1aDWahaWvraQNlqsynW+yHXKYo3ycoUv1RoLlTLCHfklt6QZbtamuLH0mOufH3HtY4mrH0pcWZjk0nyJi3MlLryb5PzbEudeT3B2doLTL8Y5NT3ByefjnHgyxpm7t7n84B6CFQbooc9uz2XT69BwDKq2wpK2xcL2Ou+3Gsxtr/NmU2J2Y41XLZGZZpUpeZVn0gpPxWWmv60zVRe5/3AMYXenjapo6JqBruqYqoHbcem7Pay2iq3qOJpR2FY00l5IHvTJgpCkF5AGIQeybRthZ3cHwzTxez5BGNAfDIiTGD+ICcKIKI4IB30G0aiOGfK7sjwv+m1FRbAsi57vEwQBg36fNEmLR2mWcZSGw+GRHklRNQRV1zDtDkbHouu5xFlKkmUF8LjPB+ePdQF0fA/bd+l4Lm4YECYxUZqQ7U+4B+FY/QRUFAXf83FdF8/ziuhZmh1GHv6N9itQVVW6jkO32y3sOA5JkpCke5HzfPjH6AfO87wAtlUVYQSJouiw+T/SDXM0oVasjWla+6eJbhhoul7cDeNfbDDaFrnZ5Dvze3ezzKW6aQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Screenshot of the HTML version of a SKOS concept published with SkoHub.\"\n        title=\"Screenshot of the HTML version of a SKOS concept published with SkoHub.\"\n        src=\"/static/85426ef69485c8c526778217db5f24f5/f058b/concept.png\"\n        srcset=\"/static/85426ef69485c8c526778217db5f24f5/c26ae/concept.png 158w,\n/static/85426ef69485c8c526778217db5f24f5/6bdcf/concept.png 315w,\n/static/85426ef69485c8c526778217db5f24f5/f058b/concept.png 630w,\n/static/85426ef69485c8c526778217db5f24f5/40601/concept.png 945w,\n/static/85426ef69485c8c526778217db5f24f5/78612/concept.png 1260w,\n/static/85426ef69485c8c526778217db5f24f5/1e1c3/concept.png 1670w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Screenshot of the HTML version of a SKOS concept published with SkoHub.</figcaption>\n  </figure></p>\n<p>On the left-hand side, you can see the location of the topic in the classification hierarchy. On the right-hand side, there is some basic information on the subject: It has a URI (<code class=\"language-text\">https://w3id.org/class/esc/n0322</code>), a notation (<code class=\"language-text\">0322</code>), a preferred label (<code class=\"language-text\">Library, information and archival studies</code>) and an inbox. This is how the <a href=\"https://w3id.org/class/esc/n0322.json\">underlying JSON data</a> (e.g. by adding the format suffix <code class=\"language-text\">.json</code> to the URI) looks like:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"id\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"https://w3id.org/class/esc/n0322\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"Concept\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"followers\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"https://skohub.io/followers?subject=hbz%2Fvocabs-edu%2Fheads%2Fmaster%2Fw3id.org%2Fclass%2Fesc%2Fn0322\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"inbox\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"https://skohub.io/inbox?actor=hbz%2Fvocabs-edu%2Fheads%2Fmaster%2Fw3id.org%2Fclass%2Fesc%2Fn0322\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"prefLabel\"</span><span class=\"token operator\">:</span><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"en\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"Library, information and archival studies\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"notation\"</span><span class=\"token operator\">:</span><span class=\"token punctuation\">[</span>\n    <span class=\"token string\">\"0322\"</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"broader\"</span><span class=\"token operator\">:</span><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"id\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"https://w3id.org/class/esc/n032\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"prefLabel\"</span><span class=\"token operator\">:</span><span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"en\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"Journalism and information\"</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"inScheme\"</span><span class=\"token operator\">:</span><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"id\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"https://w3id.org/class/esc/scheme\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"title\"</span><span class=\"token operator\">:</span><span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"en\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"Educational Subjects Classification\"</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Besides the usual SKOS properties, the <code class=\"language-text\">followers</code> key gives a hint that I can somehow follow this subject. Clicking on the associated URL, I will see a JSON file containing the list of followers of this subject. I am also interested in this topic and want to follow it to receive notifications about new online resources that are published and tagged with this subject. How do I achieve this?</p>\n<p>As already noted, what I need is an application that speaks ActivityPub. In this case we will use one of the most popular services in the <a href=\"https://en.wikipedia.org/wiki/Fediverse\">Fediverse</a>: Mastodon. So, I open up my Mastodon client and put the topic URI into the search box:</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 296px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/7ac0ab406412da9d354db3ca10b81ac9/b1a44/subscribe.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 95.56962025316456%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAAA7EAAAOxAGVKw4bAAADNUlEQVQ4y41UuXIrVRCd34BnjTRaZ5U0i0YzkkazSJqRtXosy7Lxqwc2b6MoKIqYT6BIqCKkipAIIgISPoCAmISciE840C3JdgImONV9ezm3um/3FdRmD2Z3gqYVsbRIt2MYZsg6oeUkaNnx/Zli252E9WOu1U0h610ITStEMrvB2fXH8MM13P4c+c0nePH2C9a7wRKz85dYbt/AHSz4fH7zKdLl++gOFvDDM6x2HyFMd9DbAYSWEyPKrpGtb9GL8z3B5hW2Lz6HF6zgDdeYnt1hmt/BG6740vnmFUazG/ZRDvmJ0DCHECoNE7Luoa44LBXDQ01xUG1YrBPIV1c692fyN1SXdcqpHXLLtRaEYlljpVQxGFL1AXubDqnavNcf4g42iq01Uam3UZRUCKR4wwWS2RV6EZU4RzA+RzS9hBcuEIxy9OIVwvSC7f14jcEohx8tEU8vEWVb+OGCyyUuLrlph+j0M1jeGK1OzNL2Jmh3YriDU5jdEWx/wrC6Izh+yj6ym27C+Vp7gHK9BaFQklEsqyAplhSIksqyQDpLGaK0l8eYo008xFAOtaNQlPcl0/w0NBcN3UVd7TDoTPb/gwZJgx6lCaGm2Oj0TmF7GUx3DHdAs7dgqZsBdHN4kP8Nww5BXEJNdR4m3olgeykcf8q2B8KnEHAfmVA6PHupqnNTpdp+FEivyhYqsonqE+AYxUKxokF4t1CBYQ1hdseoa9Q/h/tChAVJhlhWngY9UFnFSbFOhFU07Qi2nzIhlU3rSMQURLf+G8h/BJ1Pig0IVB7hnUINz8QGxLLGOClRoI5ixUCBbTpLAtnEig6a4SOodNo6gZxBvMCXX3+Lr775Dul8C68/wXR+gXC0QBDNkM0ukEzWGGc5JtOcbcNkjrq6Hy3adcU47PIzUcZmd4tff/8Tv/3xF+7efIZwvMbu+Wtsru6wzJ/j4upD5JcfYHv9kvXZ6hrnu1vo7T73f5BsmJAeVxAlDUmW4/sff8YPP/2C+dl7ML0UfrRCZ3AKu5cxLG+C7nABp3/K/XaDOZPRDtO3phj+npA2paE9mnraGM3lL4m/LfURHtvoC+PYDo8XT8Y/hH8DA7lqZs2FNQEAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Screenshot of a Mastodon search result for a topic URL with adjacent subscribe button\"\n        title=\"Screenshot of a Mastodon search result for a topic URL with adjacent subscribe button\"\n        src=\"/static/7ac0ab406412da9d354db3ca10b81ac9/b1a44/subscribe.png\"\n        srcset=\"/static/7ac0ab406412da9d354db3ca10b81ac9/c26ae/subscribe.png 158w,\n/static/7ac0ab406412da9d354db3ca10b81ac9/b1a44/subscribe.png 296w\"\n        sizes=\"(max-width: 296px) 100vw, 296px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Screenshot of a Mastodon search result for a topic URL with adjacent subscribe button</figcaption>\n  </figure></p>\n<p>I click on the follow button and am now following this subject with my Mastodon account and will receive any updates posted by it.</p>\n<h2>Describing and announcing a resource with SkoHub Editor</h2>\n<p>Let’s now switch into the role of a scholar, teacher, tutor or general interested person who has created an instructive online resource and wants to publish it to all people interested in the topic of “Library, information and archival studies”. In this case, I published a <a href=\"http://blog.lobid.org/2020/01/29/skohub-talk-at-swib19.html\">blog post about a talk at SWIB19 – Semantic Web in Libraries Conference</a> and want to share it with others. I somehow need to send a message to the topic’s inbox, in this case I am using the SkoHub Editor (but it could be any other ActivityPub client or even the command line interface from which I publish). For the best user experience I download the SkoHub browser extension (<a href=\"https://addons.mozilla.org/firefox/addon/skohub-extension/\">Firefox</a>, <a href=\"https://chrome.google.com/webstore/detail/skohub/ghalhmcgaicdcpmdicinaegnoanfmggd\">Chrome</a>).</p>\n<p>As the default JSON schema uses another classification, we first have to configure the editor based on a schema that actually makes use of the Educational Subjects Classification. For this, we created a <a href=\"https://raw.githubusercontent.com/dini-ag-kim/lrmi-profile/useEsc4Subjects/draft/schemas/schema.json\">version of the default schema</a> that does so. Now I put it into the extension’s settings:</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0c9af9bcdba57992a010aab21454ead2/c391c/configure-extension.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 57.59493670886076%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsTAAALEwEAmpwYAAABMElEQVQoz6WQ227DIAxA8/+/NmndAqRZs3ZNQ64iEMhlhOtE2ql7mrTuyLKE5SNjR0TNXdOc88tYaWf97zgX8rHVRTeun3OEJa9x+Zam1XvDCKGUDmzoe0opZWxgwyA4F2IUQoQnY8s0pnmfnRu1ysgoxQZ+qmhyacGx+cBtVZZVXRcFpowtyzKN0zhO87zIG6vRq9HKGBt1XafUyqQvuMfcS+0E52FuT5VS0zQR0hPSCyHchv1Gax0RQo6nU12XZZHjSy6lvO7mnLfWhnbvQ2yaMdbYOxHGZQzgC4BPz7vdKwAoAck+RiiGCKAEon0MYQxQCIhimACUxBClhyzIVV0n+3SV0mw/0VorpX7kW0WpraLuDc65qGnbQ5YZY/wfCbJ/lCBfj/Gg/K/J9lGMMV9xgrNr3lzzTgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Screenshot of how to configure a custom schema in the SkoHub Editor extension for Firefox\"\n        title=\"Screenshot of how to configure a custom schema in the SkoHub Editor extension for Firefox\"\n        src=\"/static/0c9af9bcdba57992a010aab21454ead2/f058b/configure-extension.png\"\n        srcset=\"/static/0c9af9bcdba57992a010aab21454ead2/c26ae/configure-extension.png 158w,\n/static/0c9af9bcdba57992a010aab21454ead2/6bdcf/configure-extension.png 315w,\n/static/0c9af9bcdba57992a010aab21454ead2/f058b/configure-extension.png 630w,\n/static/0c9af9bcdba57992a010aab21454ead2/c391c/configure-extension.png 673w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Screenshot of how to configure a custom schema in the SkoHub Editor extension for Firefox</figcaption>\n  </figure></p>\n<p>Then, I fire up the extension when visiting the web page I like to share and add data to the input form:</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/492b5e6e95c98c3719cf62258f6ff200/29114/describing.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 55.06329113924051%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB+ElEQVQoz3WSPW/TUBhGM5ZfQYtgohMLUidEBwQSjMCfIUykYmNgofwRaJeKlVKpH2qq1k4TJ/68TmzHHze+tnOQr2gHqrzSkWU/1tF9Xt3O78NDjo7+cHx8rDk9PaXf72vOzs70+w0nJyf6W5tdXFxo+i3//j/v9+kEQhCGgiiKiFuShCRJ9LPIc6RcaMqy1OR5TpZlnIdjhpbFcGRxZZiYhsHgekiHFTNLUszLc+yRzbU5IggCXNelqiqdL+oK1/PxA0EgQpI0wxeCznK55H/aaU93dWVgmgaGYTIejxkMBhSy0Hld14ysMbbjIqZTZlGMNbHvnvBGqJQijhOklMhCspBKV1aqhmUrbBAi1PXLUqGqCi8IVgtHlsW3r1/Y6X2i19thp/eZbvcjP3/s6byqa4Kg3f+UNMs1E8e9K2yrtLO/t8+TRw94uHGf9fUNNjcfc29tjW73g85LpRBhqPfY1s3yAsf1VgsPDn6x/ew5796/ZfvFS169fsPTrS12v+/ersT1PF07TuZkWY4vwtWVF6rEmQlymTJNZsRpxDxLWJTqtrLjB/hiyjRKiOcZjuevFkrZ4LuSeZyRxjnzWUo0U/h+Q9MsaZoG23UZ244W2a7HxHZWC4tiiec1VGVNuagoZYVSUJbt1UILW9mlOcAYDLFsV1+bv4/4J7HOt8tVAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Describing a resource with the SkoHub Editor browser extension\"\n        title=\"Describing a resource with the SkoHub Editor browser extension\"\n        src=\"/static/492b5e6e95c98c3719cf62258f6ff200/f058b/describing.png\"\n        srcset=\"/static/492b5e6e95c98c3719cf62258f6ff200/c26ae/describing.png 158w,\n/static/492b5e6e95c98c3719cf62258f6ff200/6bdcf/describing.png 315w,\n/static/492b5e6e95c98c3719cf62258f6ff200/f058b/describing.png 630w,\n/static/492b5e6e95c98c3719cf62258f6ff200/40601/describing.png 945w,\n/static/492b5e6e95c98c3719cf62258f6ff200/78612/describing.png 1260w,\n/static/492b5e6e95c98c3719cf62258f6ff200/29114/describing.png 1920w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Describing a resource with the SkoHub Editor browser extension</figcaption>\n  </figure></p>\n<p>I select the topic “Library, information and archival studies” from the suggestions in the “subject” field, add information on licensing etc. and click “Publish”. A pop up lets me know that the resource is published to “Library, information and archival studies”. In the background, the description of the resource is sent to the respective topic (it could be more than one) which distributes the information to all its subscribers. Thus, in the end I as a subscriber of the topic will receive a notification of the resource in my Mastodon timeline:</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 472px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/158048ebfeeb80ac9314a6beda41e5d6/3c5de/toot.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 36.075949367088604%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABdklEQVQoz3WMvZKTYBiFuRVndsxHAoHwFwKbP34CYQOEYDbJ7kYbG5tttPQCLLfayrH3KrwBWys7b8BLeBwYHNNYPHPOO+e8RwrTPXl1pqheM13kaOaSkR2iW0HHpf9H07nEGMdcBxWS5UZ40zXmOMJwQjRzgW41o0Grf+9LRvYSdTRvUfQZij5FNebtsPTp6TPfvv/k7bv33JQHsuLAZnuiqO54dXhDXh7YlEfq/ZmiPFLVD9T7B/zZGsuNcbwYaxyg6D4DzUd6/vKVH79+8/jhI3FatU/l7p5sU7Op7lnlJ+bJvtUoP7FIaoLswKo8s1zfkm7PJMUdpp8iVA/JvU6I0x22v2KW3uJHO5bZkeDmhLHY8tJOEHaMcBKEkyKsztsrhBnSM8LW992MwWiGdCVMXlxpiKGPOskQxhLZilpVxyv6wwnywEb0rY5LbyG6rCebyKqLJJQxDc2jbs6RFYfBcIKieejmos3koUev6/2PJpfVCX8A+bf0AFYI6eEAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"The toot announcing a resource newly published to a SkoHub topic\"\n        title=\"The toot announcing a resource newly published to a SkoHub topic\"\n        src=\"/static/158048ebfeeb80ac9314a6beda41e5d6/3c5de/toot.png\"\n        srcset=\"/static/158048ebfeeb80ac9314a6beda41e5d6/c26ae/toot.png 158w,\n/static/158048ebfeeb80ac9314a6beda41e5d6/6bdcf/toot.png 315w,\n/static/158048ebfeeb80ac9314a6beda41e5d6/3c5de/toot.png 472w\"\n        sizes=\"(max-width: 472px) 100vw, 472px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">The toot announcing a resource newly published to a SkoHub topic</figcaption>\n  </figure></p>\n<h2>Protocols and implementation</h2>\n<p>The SkoHub-PubSub server is built in <a href=\"https://nodejs.org/en/\">Node.js</a> and implements a subset of <a href=\"http://activitypub.rocks/\">ActivityPub</a>, <a href=\"https://www.w3.org/TR/ldn/\">Linked Data Notifications</a> and <a href=\"https://docs.joinmastodon.org/spec/webfinger/\">Webfinger</a> to achieve the behavior described above. On the ActivityPub side, Server to Server <a href=\"https://www.w3.org/TR/activitypub/#follow-activity-inbox\">Follow</a> and corresponding <a href=\"https://www.w3.org/TR/activitypub/#undo-activity-inbox\">Undo</a> interactions can be received to handle the subscription mechanism. Non-activity messages are considered Linked Data Notifications and can simply be sent to the inbox of a subject using a <a href=\"https://www.w3.org/TR/ldn/#sender\">POST request</a> with any JSON body. These notifications are considered metadata payload, wrapped in a <code class=\"language-text\">Create</code> action and distributed to every follower of the corresponding subject again using ActivityPub.</p>\n<p>As for the internals, <a href=\"https://www.mongodb.com/\">MongoDB</a> is used to manage followers lists and an <a href=\"https://www.elastic.co/elasticsearch/\">Elasticsearch</a> index is used to keep an archive of all payloads that have been distributed. This archive can be used to search and further explore metadata that has been distributed, e.g. by visualizing the distribution of subjects across all payloads.</p>\n<p>The most challenging aspects of the implementation were to gain an understanding of <a href=\"https://github.com/hbz/skohub-pubsub/issues/27\">Webfinger</a> for user discovery and of the details of message signatures and how to validate them. <a href=\"https://blog.joinmastodon.org/2018/06/how-to-implement-a-basic-activitypub-server/\">“How to implement a basic ActivityPub server”</a> was a good guidance here!</p>\n<h2>Outlook</h2>\n<p>We currently consider PubSub the least mature component of SkoHub. In the future, we would like to validate incoming Linked Data Notifications against a JSON schema that should be specific enough to ensure a consistent experience when viewing them e.g. in Mastodon but flexible enough to support additional use cases. We would also like to support <a href=\"https://github.com/hbz/skohub-pubsub/issues/38\">ActivityPub on the publication side</a> and <a href=\"https://www.w3.org/TR/activitypub/#announce-activity-inbox\">Announce</a> activities in order to enable use cases such as <a href=\"https://github.com/hbz/skohub-pubsub/issues/37\">mentioning a SkoHub concept on Mastodon</a>. We would really value your input on this!</p>","frontmatter":{"title":"Presenting SkoHub PubSub","date":"June 25, 2020","authors":[{"lastname":"Pohl","firstname":"Adrian"},{"lastname":"Ostrowski","firstname":"Felix"}],"description":null}},"previous":{"fields":{"slug":"/2020-03-31-skohub-editor/"},"frontmatter":{"title":"Presenting the SkoHub Editor"}},"next":{"fields":{"slug":"/2020-10-09-skohub-apconf/"},"frontmatter":{"title":"ActivityPub Conference 2020"}}},"pageContext":{"id":"8222f844-ed14-527d-aaad-85f396f7f114","previousPostId":"3f590c02-dbe3-5472-b3e9-0a71e9ac4b31","nextPostId":"0b55c8af-edf8-5752-a9bd-9a5c99bc636c"}},"staticQueryHashes":["1878297489","2734362168","3000541721"],"slicesMap":{}}